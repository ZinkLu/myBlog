---
title: "【HomeServer】- 家庭硬件设备的演变"
date: "2022-09-25T00:25:00+08:00"
draft: true
summary: 【别硬折腾】系列之 【HomeServer. Part1.】
isMath: false
---

> 【别硬折腾】是我折腾硬件一些记录。
> 
> 这是我的第一期的内容，家庭服务器。
> 
> 本期分为三个篇章：
> 
> Part1 记录了家庭网络环境、设备的一些演变；
> 
> Part2 以我最新的方案为例，记录搭建的全过程；
> 
> Part3 是应用部分，我现在正在使用家庭服务器做的一些事情；
> 
> 本篇为Part1，记录了我从2018到2022年一些网络环境的变化，以及设备的变化，以及引入新设备后的一些方案的变化。最重要的，还有我自己的一些改变。

# 1. 为什么要写演变？

随着时间的推进，我们的认知在不停的变化，学习到的知识在不断积累。我们居住的环境也可能变化，刚毕业的时候我们还在合租，和大家公用WiFi，后面有可能自己租房子，自己去办理宽带，独立管理网络。我们也会不断新增硬件，不断替换掉旧的硬件。

我们不必上来就整一个机架回家，装上两个刀片服务器，整个什么全屋WIFI（可能连全屋都没有），也不需要整个16盘位NAS。

{{< img src=rack_server.webp size=50% lines=你真的需要他吗 >}}

比起高大全，根据当下的网络环境、资源和需求找到最合理的方案才是最值得考虑的。因此一开始，我本只想写一篇 《如何在 docker 中安装 OpenWRT 》的文章。结果过了一段时间，我发现我不需要再使用 Docker 作为旁路由，而文章也只是开了个头就仅仅开了个头。写演变的目的就是为了让本文更加具有参考性。好让处于不同阶段的读者都有所收获。

另外就是我也想记录自己这些折腾经历，基本上就是一个受锤的过程。提醒自己下次再要采购什么硬件的时候，记得三思。

# 2. 小米路由器，但是mini

<!-- 地点：人才公寓合租单间

网络环境：公用电信宽带200兆 -->

年轻的时候谁还没住过一个合租的屋子呢？

由于是和同事一起排队的人才公寓，网络自然一起去办理的，一起平分的押金，AA网费，200M 带宽公用。

大家一开始都是使用使用光猫的 WIFI 进行上网，其实也挺好。只有最远屋子的一个老哥由于 WIFI 信号太差，自己走墙内网线接了一个网件的 r7000 作为 AP，基本上就是最简单最纯真的美好。

<!-- 由于上海恶心的SDN网管，没有任何办法改桥接（SDN网关后面还有一个坑），所以大家都是直接使用 SDN 网关直连进行上网的， -->

{{< img src=网络拓扑图-合租房1.png size=50% lines=简简单单 >}}

---

但是总有人不老实，喜欢折腾。

之前父母家中长期使用的小米路由器 mini ，在长期运行后总是会断网，必须手动去重启。我爸没少因为这个路由器输掉网上的掼蛋对局，不断地重启操作也真的让人恼火。

不过也是，毕竟也是 2014 年的产品了，几个网线接口还都是百兆的，而且还是小米的产品，能用几年也是很了不起了。于是一怒之下，我直接买了当时网件的新品 r7000p。

不过话说回来，网件的东西还是挺经用的，即使这路由器已经从最开始的 999 跌倒了 400 块钱不到，但现在还好好地活着，特别的稳定，没出过大问题。

那个时候流行给路由器刷固件，实现一些高级的功能，总在网上看帖子说 r7000 可以华硕的梅林固件，我本来还想好好折腾一下这个 r7000p 的，但没想到和 r7000，一字之差，居然完全不支持刷机。可能是产品太新的原因，当时确实没有任何的途径可以进行刷机。后续的好长一段时间，我一直关注 r7000p 刷机进展，但也无疾而终。

r7000p 能不能刷不重要，重要的是我爸的牌局终于可以不用因为网络问题而输掉了。更何况，我还有退休下来的小米 mini ，也能让我折腾一段时间了。

在这里不得不说，小米确实是很有发烧精神的公司，至少那个时候的小米有。

彼时小米在官网上提供了数款路由器开启 ssh 的方法，也之前提供了默认的 root 密码，恰好小米路由器 mini 也在列，这简直就是广大用户的福音。现在的路由器好像都已经完全不支持 ssh 了，至少官方不会支持。这也是这台小米路由器 mini 我还一直收着的原因。

{{< img src=xiaomiwifimini.jpg size=50% lines=小米路由器mini >}}

有了 root + ssh ，路由器你要干什么可由不得你了。

于是在一个不老实人的努力下，我们的网络变成了这样：

{{< img src=网络拓扑图-合租房2.png size=50% lines=变得不单纯 >}}

多了一层 NAT，

话说

# 3. MacBook 大英雄

# 4. 着迷 AMD 准系统

# 5. Intel 工业小主机
